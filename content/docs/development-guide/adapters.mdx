---
title: Adapters
description: Pluggable infrastructure for state, streams, events, and cron
---

Adapters let you swap infrastructure implementations without changing your code. Use defaults for single-instance deployments or distributed adapters for scaling.

## How It Works

Configure adapters in `motia.config.ts`. If you don't specify any, Motia uses defaults.

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RedisStateAdapter } from '@motiadev/adapter-redis-state'

export default config({
  adapters: {
    state: new RedisStateAdapter({
      host: process.env.REDIS_HOST,
      port: 6379
    })
  }
})
```

Your Step code stays the same:

```typescript
await state.set('orders', 'order-123', { id: 'order-123' })
```

---

## Adapter Types

| Type | What it handles | Default | Distributed |
|------|----------------|---------|-------------|
| **State** | Key-value storage | File | Redis |
| **Streams** | Real-time data | File | Redis |
| **Events** | Event queues | In-memory | RabbitMQ |
| **Cron** | Job locking | In-memory | Redis |

---

## Default Adapters

For single-instance deployments. No configuration needed.

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'

export default config({
  // Uses defaults:
  // - FileStateAdapter for state
  // - FileStreamAdapter for streams
  // - InMemoryQueueEventAdapter for events
  // - InMemoryCronAdapter for cron
})
```

**Where data goes:**
- State: `.motia/motia.state.json`
- Streams: `.motia/streams/`
- Events: Process memory
- Cron: Process memory

---

## Distributed Adapters

For multi-instance deployments. Shares state and events across instances.

### Redis State

<Tabs items={['TypeScript', 'JavaScript']}>
<Tab value='TypeScript'>

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RedisStateAdapter } from '@motiadev/adapter-redis-state'

export default config({
  adapters: {
    state: new RedisStateAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
<Tab value='JavaScript'>

```javascript title="motia.config.js"
const { config } = require('@motiadev/core')
const { RedisStateAdapter } = require('@motiadev/adapter-redis-state')

module.exports = config({
  adapters: {
    state: new RedisStateAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
</Tabs>

**Install:**

```bash
npm install @motiadev/adapter-redis-state
```

### Redis Streams

<Tabs items={['TypeScript', 'JavaScript']}>
<Tab value='TypeScript'>

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RedisStreamAdapterManager } from '@motiadev/adapter-redis-streams'

export default config({
  adapters: {
    streams: new RedisStreamAdapterManager({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
<Tab value='JavaScript'>

```javascript title="motia.config.js"
const { config } = require('@motiadev/core')
const { RedisStreamAdapterManager } = require('@motiadev/adapter-redis-streams')

module.exports = config({
  adapters: {
    streams: new RedisStreamAdapterManager({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
</Tabs>

**Install:**

```bash
npm install @motiadev/adapter-redis-streams
```

### RabbitMQ Events

<Tabs items={['TypeScript', 'JavaScript']}>
<Tab value='TypeScript'>

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RabbitMQEventAdapter } from '@motiadev/adapter-rabbitmq-events'

export default config({
  adapters: {
    events: new RabbitMQEventAdapter({
      url: process.env.RABBITMQ_URL || 'amqp://localhost',
      exchangeName: 'motia.events',
      exchangeType: 'topic'
    })
  }
})
```

</Tab>
<Tab value='JavaScript'>

```javascript title="motia.config.js"
const { config } = require('@motiadev/core')
const { RabbitMQEventAdapter } = require('@motiadev/adapter-rabbitmq-events')

module.exports = config({
  adapters: {
    events: new RabbitMQEventAdapter({
      url: process.env.RABBITMQ_URL || 'amqp://localhost',
      exchangeName: 'motia.events',
      exchangeType: 'topic'
    })
  }
})
```

</Tab>
</Tabs>

**Install:**

```bash
npm install @motiadev/adapter-rabbitmq-events
```

### Redis Cron

<Tabs items={['TypeScript', 'JavaScript']}>
<Tab value='TypeScript'>

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RedisCronAdapter } from '@motiadev/adapter-redis-cron'

export default config({
  adapters: {
    cron: new RedisCronAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
<Tab value='JavaScript'>

```javascript title="motia.config.js"
const { config } = require('@motiadev/core')
const { RedisCronAdapter } = require('@motiadev/adapter-redis-cron')

module.exports = config({
  adapters: {
    cron: new RedisCronAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT || '6379')
    })
  }
})
```

</Tab>
</Tabs>

**Install:**

```bash
npm install @motiadev/adapter-redis-cron
```

---

## All Together

Using all distributed adapters:

```typescript title="motia.config.ts"
import { config } from '@motiadev/core'
import { RedisStateAdapter } from '@motiadev/adapter-redis-state'
import { RedisStreamAdapterManager } from '@motiadev/adapter-redis-streams'
import { RabbitMQEventAdapter } from '@motiadev/adapter-rabbitmq-events'
import { RedisCronAdapter } from '@motiadev/adapter-redis-cron'

export default config({
  adapters: {
    state: new RedisStateAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: 6379
    }),
    streams: new RedisStreamAdapterManager({
      host: process.env.REDIS_HOST || 'localhost',
      port: 6379
    }),
    events: new RabbitMQEventAdapter({
      url: process.env.RABBITMQ_URL || 'amqp://localhost',
      exchangeName: 'motia.events',
      exchangeType: 'topic'
    }),
    cron: new RedisCronAdapter({
      host: process.env.REDIS_HOST || 'localhost',
      port: 6379
    })
  }
})
```

---

## When to Use What

**Default adapters:**
- Single Motia instance
- Development
- Testing
- Simple deployments

**Distributed adapters:**
- Multiple Motia instances
- Horizontal scaling
- Production deployments
- High availability

---

